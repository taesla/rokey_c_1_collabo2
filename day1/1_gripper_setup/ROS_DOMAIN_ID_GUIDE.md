# ROS_DOMAIN_ID μ„¤μ • κ°€μ΄λ“

## π“‹ κ°μ”

ROS_DOMAIN_IDλ” κ°™μ€ λ„¤νΈμ›ν¬μ—μ„ μ—¬λ¬ ROS 2 μ‹μ¤ν…μ„ **κ²©λ¦¬**ν•λ” μ—­ν• μ„ ν•©λ‹λ‹¤. μ—¬λ¬ ν€μ΄ λ™μΌν• WiFi λ„¤νΈμ›ν¬λ¥Ό μ‚¬μ©ν•  λ•, κ° ν€μ λ΅λ΄‡μ΄ μ„λ΅ κ°„μ„­ν•μ§€ μ•λ„λ΅ ν•λ” μ¤‘μ”ν• μ„¤μ •μ…λ‹λ‹¤.

---

## π― μ™ κ°λ³„ μ„¤μ •μ΄ ν•„μ”ν•κ°€?

### λ¬Έμ  μƒν™©: λ¨λ“  μ΅°μ›μ΄ κ°™μ€ ID μ‚¬μ©
```bash
# β μλ»λ λ°©λ²• - λ¨λ“  ν€μ΄ λ™μΌν• ID μ‚¬μ©
export ROS_DOMAIN_ID=60  # ν€ 1
export ROS_DOMAIN_ID=60  # ν€ 2 (μ¶©λ!)
export ROS_DOMAIN_ID=60  # ν€ 3 (μ¶©λ!)
```

**λ°μƒν•λ” λ¬Έμ :**
- β οΈ λ‹¤λ¥Έ ν€μ ν† ν”½μ΄ λ‚΄ λ΅λ΄‡μ— λ³΄μ„
- β οΈ λ‹¤λ¥Έ ν€μ λ…λ Ήμ΄ λ‚΄ λ΅λ΄‡μ„ μ μ–΄ν•  μ μμ
- β οΈ ν† ν”½ μ΄λ¦„μ΄ κ²ΉμΉλ©΄ λ°μ΄ν„°κ°€ μ„μ„
- β οΈ λ””λ²„κΉ…μ΄ λ§¤μ° μ–΄λ ¤μ›μ§

### ν•΄κ²° λ°©λ²•: ν€λ³„λ΅ λ‹¤λ¥Έ ID ν• λ‹Ή
```bash
# β… μ¬λ°”λ¥Έ λ°©λ²• - κ° ν€λ§λ‹¤ κ³ μ ν• ID
export ROS_DOMAIN_ID=60  # ν€ 1
export ROS_DOMAIN_ID=61  # ν€ 2
export ROS_DOMAIN_ID=62  # ν€ 3
export ROS_DOMAIN_ID=63  # ν€ 4
export ROS_DOMAIN_ID=64  # ν€ 5
```

**μ΄μ :**
- β… κ° ν€μ λ΅λ΄‡μ΄ λ…λ¦½μ μΌλ΅ μ‘λ™
- β… λ‹¤λ¥Έ ν€μ λ…λ Ή/ν† ν”½μ΄ λ³΄μ΄μ§€ μ•μ
- β… λ„¤νΈμ›ν¬ νΈλν”½ κ°μ†
- β… μ•μ „ν• μ‘μ—… ν™κ²½

---

## π”§ μ„¤μ • λ°©λ²•

### 1. μ„μ‹ μ„¤μ • (ν„μ¬ ν„°λ―Έλ„λ§)

```bash
# ν€ λ²νΈμ— λ§λ” ID μ„¤μ •
export ROS_DOMAIN_ID=60  # ν€ 1
export ROS_DOMAIN_ID=61  # ν€ 2
export ROS_DOMAIN_ID=62  # ν€ 3
export ROS_DOMAIN_ID=63  # ν€ 4
export ROS_DOMAIN_ID=64  # ν€ 5

# ν™•μΈ
echo $ROS_DOMAIN_ID
```

**λ‹¨μ :** ν„°λ―Έλ„μ„ λ‹«μΌλ©΄ μ„¤μ •μ΄ μ‚¬λΌμ§

### 2. μκµ¬ μ„¤μ • (κ¶μ¥)

#### λ°©λ²• A: `.bashrc` νμΌμ— μ¶”κ°€

```bash
# .bashrc νμΌ μ—΄κΈ°
nano ~/.bashrc

# νμΌ λ§¨ μ•„λμ— μ¶”κ°€ (ν€ λ²νΈμ— λ§κ² μμ •)
export ROS_DOMAIN_ID=60  # λ³ΈμΈ ν€ λ²νΈλ΅ λ³€κ²½

# μ €μ¥ ν›„ μ μ©
source ~/.bashrc

# ν™•μΈ
echo $ROS_DOMAIN_ID
```

#### λ°©λ²• B: μ¤ν¬λ¦½νΈ μ‚¬μ©

```bash
# μ¤ν¬λ¦½νΈ μƒμ„±
nano ~/setup_ros_domain_id.sh

# λ‚΄μ© μ…λ ¥ (ν€ λ²νΈμ— λ§κ²)
#!/bin/bash
export ROS_DOMAIN_ID=60
echo "ROS_DOMAIN_ID set to $ROS_DOMAIN_ID"

# μ‹¤ν–‰ κ¶ν• λ¶€μ—¬
chmod +x ~/setup_ros_domain_id.sh

# μ‚¬μ©
source ~/setup_ros_domain_id.sh
```

---

## π§ μ„¤μ • ν™•μΈ λ° ν…μ¤νΈ

### 1. ν™κ²½ λ³€μ ν™•μΈ

```bash
# ν„μ¬ μ„¤μ •λ DOMAIN_ID ν™•μΈ
echo $ROS_DOMAIN_ID

# μμƒ μ¶λ ¥: 60, 61, 62, 63, λλ” 64
```

### 2. κ°™μ€ ν€μ›λΌλ¦¬ ν†µμ‹  ν…μ¤νΈ

**ν€μ› A (Publisher):**
```bash
# ROS_DOMAIN_IDκ°€ λ™μΌν•μ§€ ν™•μΈ
echo $ROS_DOMAIN_ID  # μ: 60

# ν…μ¤νΈ ν† ν”½ λ°ν–‰
ros2 topic pub /test_topic std_msgs/msg/String "data: 'Hello from Team A'"
```

**ν€μ› B (Subscriber):**
```bash
# ROS_DOMAIN_IDκ°€ λ™μΌν•μ§€ ν™•μΈ
echo $ROS_DOMAIN_ID  # μ: 60 (ν€μ› Aμ™€ λ™μΌν•΄μ•Ό ν•¨)

# ν† ν”½ λ¦¬μ¤νΈ ν™•μΈ
ros2 topic list

# /test_topicμ΄ λ³΄μ—¬μ•Ό ν•¨

# ν† ν”½ κµ¬λ…
ros2 topic echo /test_topic

# "Hello from Team A" λ©”μ‹μ§€κ°€ λ³΄μ—¬μ•Ό ν•¨
```

### 3. λ‹¤λ¥Έ ν€κ³Ό κ²©λ¦¬ ν™•μΈ

**λ‹¤λ¥Έ ν€ (ROS_DOMAIN_ID=61):**
```bash
echo $ROS_DOMAIN_ID  # 61 (λ‹¤λ¥Έ ν€)

# ν† ν”½ λ¦¬μ¤νΈ ν™•μΈ
ros2 topic list

# /test_topicμ΄ λ³΄μ΄μ§€ μ•μ•„μ•Ό ν•¨ β…
```

---

## π“ ν€λ³„ ID ν• λ‹Ή κ°€μ΄λ“

### κ¶μ¥ ν• λ‹Ή λ°©μ‹

| ν€ λ²νΈ | ROS_DOMAIN_ID | λΉ„κ³  |
|--------|---------------|------|
| ν€ 1 | 60 | κΈ°λ³Έ ν• λ‹Ή |
| ν€ 2 | 61 | |
| ν€ 3 | 62 | |
| ν€ 4 | 63 | |
| ν€ 5 | 64 | |

### ID λ²”μ„ μ μ•½
- **μ‚¬μ© κ°€λ¥ λ²”μ„:** 0 ~ 101 (ROS 2 Humble κΈ°μ¤€)
- **κ¶μ¥ λ²”μ„:** 60 ~ 64 (κµμ΅ ν™κ²½)
- **μμ•½ λ²”μ„:** 0μ€ νΉλ³„ν• κ²½μ°μ—λ§ μ‚¬μ©

---

## π” μ‹¤μ „ μ‹λ‚λ¦¬μ¤

### μ‹λ‚λ¦¬μ¤ 1: 5κ° ν€μ΄ κ°™μ€ μ‹¤μµμ‹¤μ—μ„ μ‘μ—…

```
WiFi: RokeyLab (κ³µν†µ)
β”β”€β”€ ν€ 1 (DOMAIN_ID=60)
β”‚   β”β”€β”€ λ΅λ΄‡ A (192.168.137.100)
β”‚   β””β”€β”€ λ…ΈνΈλ¶ 2λ€
β”β”€β”€ ν€ 2 (DOMAIN_ID=61)
β”‚   β”β”€β”€ λ΅λ΄‡ B (192.168.137.101)
β”‚   β””β”€β”€ λ…ΈνΈλ¶ 2λ€
β”β”€β”€ ν€ 3 (DOMAIN_ID=62)
β”‚   β”β”€β”€ λ΅λ΄‡ C (192.168.137.102)
β”‚   β””β”€β”€ λ…ΈνΈλ¶ 2λ€
β”β”€β”€ ν€ 4 (DOMAIN_ID=63)
β”‚   β”β”€β”€ λ΅λ΄‡ D (192.168.137.103)
β”‚   β””β”€β”€ λ…ΈνΈλ¶ 2λ€
β””β”€β”€ ν€ 5 (DOMAIN_ID=64)
    β”β”€β”€ λ΅λ΄‡ E (192.168.137.104)
    β””β”€β”€ λ…ΈνΈλ¶ 2λ€
```

**κ° ν€μ λ„¤νΈμ›ν¬:**
- λ¬Όλ¦¬μ μΌλ΅λ” κ°™μ€ WiFi μ‚¬μ©
- ROS_DOMAIN_IDλ΅ λ…Όλ¦¬μ μΌλ΅ κ²©λ¦¬
- ν€ λ‚΄λ¶€μ—μ„λ§ ν† ν”½/μ„λΉ„μ¤ ν†µμ‹ 

### μ‹λ‚λ¦¬μ¤ 2: ν€ λ‚΄ μ—¬λ¬ λ…ΈνΈλ¶ μ‘μ—…

```bash
# ν€ 1μ λ¨λ“  λ…ΈνΈλ¶μ—μ„ λ™μΌν•κ² μ„¤μ •
λ…ΈνΈλ¶ A: export ROS_DOMAIN_ID=60
λ…ΈνΈλ¶ B: export ROS_DOMAIN_ID=60
λ…ΈνΈλ¶ C: export ROS_DOMAIN_ID=60

# κ²°κ³Ό: ν€ 1 λ‚΄λ¶€μ—μ„λ” λ¨λ“  ν† ν”½/μ„λΉ„μ¤κ°€ κ³µμ λ¨
```

### μ‹λ‚λ¦¬μ¤ 3: κ°μΈ κ°λ° (μ§‘/νΌμ μ‘μ—…)

```bash
# νΌμ μ‘μ—…ν•  λ•λ„ μΌκ΄€μ„± μ μ§€
export ROS_DOMAIN_ID=60

# λλ” κΈ°λ³Έκ°’ μ‚¬μ©
unset ROS_DOMAIN_ID  # DOMAIN_ID=0 μ‚¬μ©
```

---

## β οΈ μ£Όμμ‚¬ν•­

### 1. ν€ μ „μ²΄κ°€ λ™μΌν• ID μ‚¬μ©
```bash
# β… ν€μ› λ¨λ‘ λ™μΌν•΄μ•Ό ν•¨
ν€μ› A: ROS_DOMAIN_ID=60
ν€μ› B: ROS_DOMAIN_ID=60
ν€μ› C: ROS_DOMAIN_ID=60
```

### 2. λ΅λ΄‡ λ“λΌμ΄λ²„ μ‹¤ν–‰ μ „ μ„¤μ • ν™•μΈ
```bash
# λ°λ“μ‹ λ¨Όμ € ν™•μΈ
echo $ROS_DOMAIN_ID

# μ„¤μ • ν›„ λ΅λ΄‡ λ“λΌμ΄λ²„ μ‹¤ν–‰
ros2 launch dsr_bringup2 dsr_bringup2_rviz.launch.py ...
```

### 3. μƒ ν„°λ―Έλ„λ§λ‹¤ ν™•μΈ
```bash
# μƒ ν„°λ―Έλ„ μ—΄ λ•λ§λ‹¤
echo $ROS_DOMAIN_ID

# μ„¤μ • μ• λμ–΄ μμΌλ©΄
source ~/.bashrc  # λλ” export λ…λ Ή μ‹¤ν–‰
```

### 4. RViz/λ‹¤λ¥Έ λ…Έλ“ μ‹¤ν–‰ μ‹μ—λ„ λ™μΌν• ID
```bash
# λ¨λ“  ROS 2 κ΄€λ ¨ ν”„λ΅κ·Έλ¨ μ‹¤ν–‰ μ „ ν™•μΈ
echo $ROS_DOMAIN_ID

# μ: RViz μ‹¤ν–‰
rviz2

# μ: rqt μ‹¤ν–‰
rqt
```

---

## π› οΈ νΈλ¬λΈ”μν…

### λ¬Έμ  1: λ‹¤λ¥Έ ν€μ ν† ν”½μ΄ λ³΄μ„

**μ¦μƒ:**
```bash
ros2 topic list
# λ‹¤λ¥Έ ν€μ /robot_B/... κ°™μ€ ν† ν”½μ΄ λ³΄μ„
```

**ν•΄κ²°:**
```bash
# 1. DOMAIN_ID ν™•μΈ
echo $ROS_DOMAIN_ID

# 2. μλ»λμ–΄ μμΌλ©΄ μμ •
export ROS_DOMAIN_ID=60  # λ³ΈμΈ ν€ ID

# 3. λ¨λ“  ROS 2 λ…Έλ“ μ¬μ‹μ‘
pkill -f ros2
ros2 launch ...
```

### λ¬Έμ  2: κ°™μ€ ν€μ›κ³Ό ν†µμ‹  μ• λ¨

**μ¦μƒ:**
```bash
# ν€μ› Aκ°€ λ°ν–‰ν• ν† ν”½μ΄ μ• λ³΄μ„
ros2 topic list  # /test_topic μ—†μ
```

**ν•΄κ²°:**
```bash
# 1. μ–‘μ½ DOMAIN_ID ν™•μΈ
echo $ROS_DOMAIN_ID

# 2. ν€μ› Aμ™€ Bκ°€ κ°™μ€ IDμΈμ§€ ν™•μΈ
# ν€μ› A: 60
# ν€μ› B: 60 (κ°™μ•„μ•Ό ν•¨)

# 3. λ„¤νΈμ›ν¬ μ—°κ²° ν™•μΈ
ping <ν€μ›_IP>

# 4. λ°©ν™”λ²½ ν™•μΈ
sudo ufw status  # κΊΌμ Έ μμ–΄μ•Ό ν•¨
```

### λ¬Έμ  3: μ„¤μ •μ΄ μ €μ¥ μ• λ¨

**μ¦μƒ:**
```bash
# ν„°λ―Έλ„ λ‹«κ³  λ‹¤μ‹ μ—΄λ©΄
echo $ROS_DOMAIN_ID
# (μ•„λ¬΄κ²ƒλ„ μ¶λ ¥ μ• λ¨)
```

**ν•΄κ²°:**
```bash
# .bashrcμ— μκµ¬ μ„¤μ •
echo 'export ROS_DOMAIN_ID=60' >> ~/.bashrc
source ~/.bashrc

# ν™•μΈ
echo $ROS_DOMAIN_ID  # 60
```

### λ¬Έμ  4: ID λ³€κ²½ ν›„μ—λ„ μ΄μ „ IDμ ν† ν”½μ΄ λ³΄μ„

**μ›μΈ:** μ‹¤ν–‰ μ¤‘μΈ λ…Έλ“λ“¤μ΄ μ—¬μ „ν μ΄μ „ ID μ‚¬μ©

**ν•΄κ²°:**
```bash
# 1. λ¨λ“  ROS 2 ν”„λ΅μ„Έμ¤ μΆ…λ£
pkill -f ros2

# 2. DOMAIN_ID λ³€κ²½ ν™•μΈ
echo $ROS_DOMAIN_ID

# 3. λ…Έλ“ μ¬μ‹μ‘
ros2 launch ...
```

---

## π“ μ¶”κ°€ μ •λ³΄

### ROS_DOMAIN_ID λ‚΄λ¶€ λ™μ‘

```
ROS_DOMAIN_IDλ” DDS(Data Distribution Service)μ Domain Participantλ¥Ό κµ¬λ¶„ν•©λ‹λ‹¤.
- κ°™μ€ DOMAIN_ID = κ°™μ€ DDS Domain = ν† ν”½ κ³µμ 
- λ‹¤λ¥Έ DOMAIN_ID = λ‹¤λ¥Έ DDS Domain = μ™„μ „ κ²©λ¦¬
```

### κ΄€λ ¨ ν™κ²½ λ³€μ

```bash
# ROS_DOMAIN_ID (κ°€μ¥ μ¤‘μ”)
export ROS_DOMAIN_ID=60

# RMW_IMPLEMENTATION (DDS λ²¤λ”)
export RMW_IMPLEMENTATION=rmw_cyclonedds_cpp  # λλ” rmw_fastrtps_cpp

# ROS_LOCALHOST_ONLY (λ΅μ»¬ μ „μ© λ¨λ“)
export ROS_LOCALHOST_ONLY=1  # μ™Έλ¶€ λ„¤νΈμ›ν¬ μ°¨λ‹¨
```

### DDS Discovery ν™•μΈ

```bash
# ν„μ¬ Domainμ λ¨λ“  Participant ν™•μΈ
ros2 daemon stop
ros2 daemon start
ros2 topic list -v
```

---

## β… μ²΄ν¬λ¦¬μ¤νΈ

ν”„λ΅μ νΈ μ‹μ‘ μ „ ν™•μΈμ‚¬ν•­:

- [ ] ν€ λ²νΈ ν™•μΈ (1~5)
- [ ] ROS_DOMAIN_ID μ„¤μ • (60~64)
- [ ] `.bashrc`μ— μκµ¬ μ„¤μ • μ¶”κ°€
- [ ] λ¨λ“  ν€μ›μ΄ λ™μΌν• ID μ‚¬μ© ν™•μΈ
- [ ] `echo $ROS_DOMAIN_ID`λ΅ ν™•μΈ
- [ ] λ‹¤λ¥Έ ν€κ³Ό ν†µμ‹  μ• λλ”μ§€ ν…μ¤νΈ
- [ ] κ°™μ€ ν€μ›κ³Ό ν†µμ‹  λλ”μ§€ ν…μ¤νΈ

---

## π“ μ”μ•½

### ν•µμ‹¬ μ›μΉ™
1. **ν€λ³„λ΅ κ³ μ ν• ROS_DOMAIN_ID μ‚¬μ©** (60~64)
2. **ν€μ› μ „μ²΄κ°€ λ™μΌν• ID μ„¤μ •**
3. **λ§¤ ν„°λ―Έλ„λ§λ‹¤ μ„¤μ • ν™•μΈ**
4. **λ΅λ΄‡ μ μ–΄ μ „ λ°λ“μ‹ ν™•μΈ**

### λΉ λ¥Έ μ„¤μ • κ°€μ΄λ“
```bash
# 1. ν€ λ²νΈ ν™•μΈ β†’ ID κ²°μ •
ν€ 1 β†’ 60, ν€ 2 β†’ 61, ν€ 3 β†’ 62, ν€ 4 β†’ 63, ν€ 5 β†’ 64

# 2. μκµ¬ μ„¤μ •
echo 'export ROS_DOMAIN_ID=60' >> ~/.bashrc  # λ³ΈμΈ ν€ IDλ΅ λ³€κ²½
source ~/.bashrc

# 3. ν™•μΈ
echo $ROS_DOMAIN_ID

# 4. ν…μ¤νΈ
ros2 topic pub /test std_msgs/msg/String "data: 'test'"
ros2 topic list  # κ°™μ€ ν€μ›λ§ /test λ³΄μ„
```

---

**μ‘μ„±μΌ:** 2025-12-08  
**λ²„μ „:** 2.0 (κ°λ³„ DOMAIN_ID μ„¤μ • κΈ°μ¤€)  
**λ€μƒ:** ROS 2 Humble κΈ°λ° λ΅λ΄‡ μ μ–΄ μ‹¤μµ
